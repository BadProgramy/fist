(function (h) {
    var k = {
            host: "https://www.instagram.com/"
            , username: "fist.psuti"
            , tag: ""
            , container: "#instafeed"
            , display_profile: false
            , display_biography: false
            , display_gallery: true
            , get_data: !1
            , callback: null
            , styling: !0
            , items: 8
            , items_per_row: 4
            , margin: .5
            , image_size: 240
        }
        , l = {
            150: 0
            , 240: 1
            , 320: 2
            , 480: 3
            , 640: 4
        };
    h.instagramFeed = function (r) {
        var a = h.fn.extend({}, k, r);
        var m = "" == a.username;
        h.get(m ? a.host + "explore/tags/" + a.tag : a.host + a.username, function (b) {
            b = b.split("window._sharedData = ")[1].split("\x3c/script>")[0];
            b = JSON.parse(b.substr(0, b.length - 1));
            b = b.entry_data.ProfilePage || b.entry_data.TagPage;
            b = b[0].graphql.user || b[0].graphql.hashtag;
            if ($(window).width() < 385 ||  $(window).width() > 675 && $(window).width() < 1510) {a.items = 9; a.items_per_row = 3;}
            if ($(window).width() > 675 && $(window).width() < 800){a.items = 4; a.items_per_row = 4;}
            if (a.get_data) a.callback(b);
            else {
                var d = ""
                    , f = ""
                    , g = ""
                    , e = ""
                    , n = "";
                a.styling && (d = " style='text-align:center;display: flex;'", f = " style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'", g = " style='font-size:13px;color:#000;padding: 8px;'", e = " style='font-size:1em;'", n = " style='margin:" + a.margin + "% " + a.margin + "%;width:" + (100 - 2 * a.margin * a.items_per_row) / a.items_per_row + "%;float:left;'");
                var c = "";
                c += "<img alt='Instagram' src='/images/insta.png'> <hr style='width: 100%;height: 1px;margin: 9px 0;background-color: #e5e5e5;'>";

                g = "undefined" !== typeof l[a.image_size] ? l[a.image_size] : l[240];
                if (a.display_gallery)
                    if ("undefined" !== typeof b.is_private && !0 === b.is_private) c += "<p class='instagram_private'><strong>This profile is private</strong></p>";
                    else {
                        e = (b.edge_owner_to_timeline_media || b.edge_hashtag_to_media).edges;
                        f = e.length > a.items ? a.items : e.length;
                        c += "<div class='instagram_gallery' style='min-height: 74%;max-height: 74%;'>";
                        for (d = 0; d < f; d++) {
                            var k = "https://www.instagram.com/p/" + e[d].node.shortcode;
                            switch (e[d].node.__typename) {
                            case "GraphSidecar":
                                var p = "sidecar";
                                var q = e[d].node.thumbnail_resources[g].src;
                                break;
                            case "GraphVideo":
                                p = "video";
                                q = e[d].node.thumbnail_src;
                                break;
                            default:
                                p = "image", q = e[d].node.thumbnail_resources[g].src
                            }
                            c += "\t<a href='" + k + "' class='instagram-" + p + "' rel='noopener' target='_blank'>";
                            c += "   \t<img src='" + q + "' alt='" + b.name + " instagram image " + d + "'" + n + " />";
                            c += "\t</a>"
                        }
                        c += "</div>"
                    }

                c += "<a href='https://www.instagram.com/fist.psuti/' target='_blank' style='display: block;background-color: rgba(var(--d69,0,149,246),1);border: 1px solid transparent;border-radius: 4px;color: rgba(var(--eca,255,255,255),1);padding: 2%;width: -webkit-fill-available;'>Подписаться</a>"
                h(a.container).html(c)
            }
        }).fail(function (a) {
            console.error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: ", a.status)
        });
        return !0
    }
})(jQuery);
